<ng2-slim-loading-bar class="navbar-fixed-top" [color]="'#128950'" [height]="'3px'"></ng2-slim-loading-bar>
<quietthyme-header></quietthyme-header>
<div class="main-container">
    <section class="space--sm switchable switchable--switch  ">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <div class="height-50 imagebg border--round" data-overlay="2">
                        <div class="background-image-holder library-bg">
                        </div>
                        <div class="pos-vertical-center col-sm-6 boxed boxed--lg bg--none">
                            <h2>Library</h2>
                            <p class="lead">
                                Your library is accessible anytime, anywhere, on any device

                                It doesn't matter if your have 10 books or 1000's of books. Quietthyme can help you easily manage a library of any size.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!--end of row-->
        </div>
        <!--end of container-->
    </section>


    <quietthyme-opds-panel></quietthyme-opds-panel>

    <section class=" ">
        <div class="container">
            <div class="row">
                <div class="col-sm-4">
                    <div class="masonry-filter-container">
                        <span>Storage:</span>
                        <div class="masonry-filter-holder">
                            <div class="masonry__filters" data-filter-all-text="Storage">
                                <ul>
                                    <li [ngClass]="{'active': !filter.storage}" (click)="setStorage(null)">All Storage</li>

                                    <li *ngFor="let serviceStatus of connected" [ngClass]="{'active': filter.storage == serviceStatus}" (click)="setStorage(serviceStatus)">{{ storageDetails[serviceStatus.storage_type].display_name }}</li>

                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="masonry-filter-container">
                        <span>Sort By:</span>
                        <div class="masonry-filter-holder">
                            <div class="masonry__filters" data-filter-all-text="Storage">
                                <ul>
                                    <li [ngClass]="{'active': !filter.sort}" (click)="setSort(null)">Title</li>
                                    <li [ngClass]="{'active': filter.sort == 'authors'}" (click)="setSort('authors')">Author</li>
                                    <li [ngClass]="{'active': filter.sort == 'series_name'}" (click)="setSort('series_name')">Series</li>
                                    <li [ngClass]="{'active': filter.sort == 'updated_at'}" (click)="setSort('updated_at')">Added Date</li>

                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-sm-4">
                    <button type="button" class="btn btn--primary pull-right" (click)="openModalBookUpload()">Add Books</button>
                </div>

            </div>
            <div
                    infiniteScroll
                    [infiniteScrollDistance]="2"
                    [infiniteScrollThrottle]="500"
                    [infiniteScrollDisabled]="bookListAll"
                    (scrolled)="onScroll()"
                    class="row library-books">


                <masonry [useImagesLoaded]="true">


                    <masonry-brick *ngFor="let book of bookList; let myIndex = index" class="col-sm-3 masonry__item">
                        <div class="card card-2 text-center">
                            <div class="card__top">
                                <span class="label" *ngIf="book.series_name">{{ book.series_name }}</span>

                                <a routerLink="/book/{{ book.id }}" class="library-book-cover-wrapper">
                                    <img *ngIf="book.cover" class="library-book-cover" src="https://s3.amazonaws.com/{{ book.cover }}" alt="{{ book.title }}">
                                    <img *ngIf="!book.cover" class="library-book-cover" src="assets/images/noart.png" alt="{{ book.title }}">
                                </a>
                            </div>
                            <div class="card__body">
                                <h4>{{ book.title }}</h4>
                                <span class="type--fade">{{ book.authors}}</span>

                            </div>
                            <div class="card__bottom text-center">
                                <div class="card__action">
                                    <span class="h6 type--uppercase">Info</span>
                                    <a routerLink="/book/{{ book.id }}">
                                        <i class="glyphicon glyphicon-info-sign"></i>
                                    </a>
                                </div>
                                <div class="card__action">
                                    <span class="h6 type--uppercase">Download</span>
                                    <a (click)="downloadBook(book)" [ngClass]="{'downloading': loading.download[book.id]}">
                                        <i class="glyphicon glyphicon-download"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </masonry-brick>

                </masonry><!-- #shop end -->

            </div>
            <!--end of row-->
        </div>
        <!--end of container-->
    </section>
    <quietthyme-footer></quietthyme-footer>
</div>
